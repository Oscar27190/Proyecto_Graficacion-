<!DOCTYPE html>
<html>
<head>
    <title>Proyecto Gr√°ficaci√≥n</title>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            background: #222;
            font-family: Arial, sans-serif;
        }
        canvas { 
            display: block; 
            cursor: grab;
        }
        canvas:active {
            cursor: grabbing;
        }
        #info {
            position: absolute; 
            top: 10px; 
            left: 10px;
            background: rgba(0,0,0,0.85); 
            color: white;
            padding: 15px; 
            border-radius: 10px; 
            max-width: 300px;
            border: 2px solid #4CAF50;
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        .key {
            display: inline-block;
            background: #333;
            padding: 4px 10px;
            margin: 3px;
            border-radius: 5px;
            border: 1px solid #666;
            font-family: monospace;
            font-size: 14px;
        }
        h3 {
            color: #4CAF50;
            margin-top: 0;
        }
        ul {
            padding-left: 20px;
        }
        li {
            margin-bottom: 5px;
        }
        #mouse-info {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
        }
    </style>
</head>
<body tabindex="0">
    <div id="info">
        <h3>üöó Proyecto Gr√°ficaci√≥n</h3>
        <p><strong>Veh√≠culo 3D con:</strong></p>
        <ul>
            <li>‚úÖ Texturas procedurales</li>
            <li>‚úÖ Sistema de 3 luces</li>
            <li>‚úÖ Sombras din√°micas</li>
            <li>‚úÖ Gravedad b√°sica</li>
            <li>‚úÖ F√≠sicas simples</li>
            <li>‚úÖ Controles WASD</li>
            <li>‚úÖ C√°mara orbital</li>
        </ul>
        
        <h4>üéÆ Controles:</h4>
        <p><span class="key">W</span><span class="key">A</span><span class="key">S</span><span class="key">D</span> : Mover veh√≠culo</p>
        <p><span class="key">ESPACIO</span> : Activar gravedad</p>
        <p><span class="key">R</span> : Reiniciar posici√≥n</p>
        <p><span class="key">CLICK IZQ + ARRASTRAR</span> : Rotar c√°mara</p>
        <p><span class="key">RUEDA</span> : Zoom in/out</p>
        <p><span class="key">CLICK DER + ARRASTRAR</span> : Panear c√°mara</p>
        
        <p id="status" style="color: #4CAF50; margin-top: 10px; font-weight: bold;">
            ‚ñ∂Ô∏è Haz click en la pantalla y usa el rat√≥n
        </p>
    </div>
    
    <div id="mouse-info">
        Rat√≥n: Click + arrastrar para mover c√°mara
    </div>

    <!-- Three.js y OrbitControls -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- IMPORTANTE: OrbitControls desde CDN -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    
    <!-- Nuestro c√≥digo -->
    <script src="main.js"></script>
    
    <script>
        console.log("Iniciando aplicaci√≥n...");
        
        // Funci√≥n para iniciar cuando todo est√© cargado
        function initializeApp() {
            console.log("Three.js cargado:", typeof THREE !== 'undefined');
            console.log("OrbitControls cargado:", typeof THREE.OrbitControls !== 'undefined');
            console.log("init disponible:", typeof init === 'function');
            
            if (typeof THREE !== 'undefined' && typeof init === 'function') {
                // Enfocar la p√°gina para capturar teclas
                document.body.focus();
                
                // Cambiar mensaje de estado
                document.getElementById('status').textContent = '‚úÖ Aplicaci√≥n funcionando';
                document.getElementById('status').style.color = '#00ff00';
                
                // Iniciar la aplicaci√≥n
                try {
                    init();
                    console.log("‚úÖ Aplicaci√≥n iniciada correctamente");
                    
                    // Instrucciones para el rat√≥n
                    setTimeout(function() {
                        alert("Controles del rat√≥n:\n\n‚Ä¢ Click izquierdo + arrastrar: Rotar c√°mara\n‚Ä¢ Rueda: Zoom in/out\n‚Ä¢ Click derecho + arrastrar: Mover c√°mara\n\nHaz click en Aceptar para comenzar.");
                    }, 500);
                    
                } catch (error) {
                    console.error("Error al iniciar:", error);
                    document.getElementById('status').textContent = '‚ùå Error: ' + error.message;
                    document.getElementById('status').style.color = 'red';
                }
            } else {
                document.getElementById('status').textContent = '‚ùå Error: Faltan dependencias';
                document.getElementById('status').style.color = 'red';
                console.error("Falta Three.js o init()");
            }
        }
        
        // Esperar a que la p√°gina cargue completamente
        window.addEventListener('load', function() {
            console.log("P√°gina cargada completamente");
            setTimeout(initializeApp, 100);
        });
        
        // Enfocar la p√°gina cuando se haga click
        document.addEventListener('click', function() {
            document.body.focus();
            console.log("P√°gina enfocada para controles");
        });
        
        // Debug de teclas
        document.addEventListener('keydown', function(e) {
            console.log("Tecla presionada:", e.key);
        });
    </script>
</body>
</html>
